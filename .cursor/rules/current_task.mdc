---
description: 
globs: 
alwaysApply: true
---
# üïâÔ∏è –ü—Ä–∞–≤–∏–ª–æ: –í–µ–ª–∏–∫–∞—è –¶–µ–ª—å –∏ –¢–µ–∫—É—â–∏–π –≠—Ç–∞–ø (–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ü–ª–∞–Ω)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ü–æ–¥–æ–±–Ω–æ —Ä–µ–∫–µ, –Ω–µ—É–∫–ª–æ–Ω–Ω–æ —Å—Ç—Ä–µ–º—è—â–µ–π—Å—è –∫ –æ–∫–µ–∞–Ω—É, –∫–∞–∂–¥–æ–µ –Ω–∞—à–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —à–∞–≥–æ–º –∫ –í–µ–ª–∏–∫–æ–π –¶–µ–ª–∏. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ —Å–ª—É–∂–∏—Ç –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–ª–∞–Ω–æ–º —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–ø–∞, –æ—Ç—Ä–∞–∂–∞—è –ø—Ä–æ–≥—Ä–µ—Å—Å —Å –ø–æ–º–æ—â—å—é —Å—Ç–∞—Ç—É—Å–æ–≤ ‚úÖ, ‚ùå, ‚è≥. –û–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–∏–º–æ–≥–æ —à–∞–≥–∞.

**–í–µ–ª–∏–∫–∞—è –¶–µ–ª—å (–î—Ö–∞—Ä–º–∞ –ü—Ä–æ–µ–∫—Ç–∞):** üåü
–°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä–º–∏–∏ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ (–ù–µ–π—Ä–æ–ö–æ–¥–µ—Ä–æ–≤), —Å–ø–æ—Å–æ–±–Ω—ã—Ö –∫ —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—é, —Å–∞–º–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç–µ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ **–ª–æ–∫–∞–ª—å–Ω–æ –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ**.

**–¢–µ–∫—É—â–∏–π –≠—Ç–∞–ø: PoC - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `open-codex` —á–µ—Ä–µ–∑ –ê–≥–µ–Ω—Ç–æ–≤ (TeamLead -> Tester -> Executor -> Critic)**

üéØ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ1 (–¢–µ–∫—É—â–∏–π):** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫, –≥–¥–µ TeamLead —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É, Tester –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É `open-codex`, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ–µ –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `run_terminal_cmd`, –∞ Critic (–ø–æ–∫–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–æ) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

**–ü–æ–¥–∑–∞–¥–∞—á–∏ –¢–µ–∫—É—â–µ–≥–æ –≠—Ç–∞–ø–∞ (—Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏):**

1.  ‚ú® **–°–æ–∑–¥–∞–Ω–∏–µ `TeamLeadAgent`:**
    *   ‚è≥ **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –õ–æ–≥–∏–∫—É:** –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–≥–æ –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞—á—É –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –µ–µ –¢–µ—Å—Ç–µ—Ä—É, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å `NEEDS_TEST`.
    *   ‚è≥ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –°–µ—Ç—å:** –î–æ–±–∞–≤–∏—Ç—å –∞–≥–µ–Ω—Ç–∞ –≤ `createDevOpsNetwork`.
2.  ü§ñ **–ê–¥–∞–ø—Ç–∞—Ü–∏—è `TesterAgent`:**
    *   ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ö–æ–º–∞–Ω–¥—ã:** –ü—Ä–æ–º–ø—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥—ã `open-codex`.
    *   ‚è≥ **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –°—Ç–∞—Ç—É—Å–∞:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `onResponse` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å `NEEDS_TEST_CRITIQUE` (–∏–ª–∏ –¥—Ä—É–≥–æ–π, –µ—Å–ª–∏ —Ä–µ—à–∏–º, —á—Ç–æ –∫—Ä–∏—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω—É–∂–Ω–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º).
3.  ü§î **–ê–¥–∞–ø—Ç–∞—Ü–∏—è `CriticAgent` (–¥–ª—è –ö–æ–º–∞–Ω–¥—ã/–ü–ª–∞–Ω–∞ - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
    *   ‚è≥ **–†–µ—à–∏—Ç—å:** –ù—É–∂–Ω–∞ –ª–∏ –∫—Ä–∏—Ç–∏–∫–∞ *—Å–∞–º–æ–π –∫–æ–º–∞–Ω–¥—ã/–ø–ª–∞–Ω–∞*, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¢–µ—Å—Ç–µ—Ä–æ–º, *–ø–µ—Ä–µ–¥* –µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º? –ï—Å–ª–∏ –¥–∞, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ö—Ä–∏—Ç–∏–∫–∞ –Ω–∞ —ç—Ç–æ –∏ —Å—Ç–∞—Ç—É—Å `NEEDS_TEST_CRITIQUE`. –ï—Å–ª–∏ –Ω–µ—Ç, —ç—Ç–æ—Ç —à–∞–≥ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è, –∏ –¢–µ—Å—Ç–µ—Ä —Å—Ä–∞–∑—É —Å—Ç–∞–≤–∏—Ç `NEEDS_COMMAND_EXECUTION`.
4.  ‚öôÔ∏è **–û—Ä–∫–µ—Å—Ç—Ä–æ–≤–∫–∞ –í—ã–∑–æ–≤–∞ –ö–æ–º–∞–Ω–¥—ã (`codingAgentHandler`):**
    *   ‚è≥ **–ü–æ–ª—É—á–∏—Ç—å –ö–æ–º–∞–Ω–¥—É:** –ò–∑–≤–ª–µ—á—å `generated_command` –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ –¢–µ—Å—Ç–µ—Ä–∞ (–∏–ª–∏ –ö—Ä–∏—Ç–∏–∫–∞ –ö–æ–º–∞–Ω–¥—ã).
    *   ‚è≥ **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –°—Ç–∞—Ç—É—Å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Ç–∞—Ç—É—Å `NEEDS_COMMAND_EXECUTION`.
    *   ‚è≥ **–í—ã–∑–≤–∞—Ç—å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `step.invoke` –¥–ª—è –≤—ã–∑–æ–≤–∞ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `executeCommandFunction`, –ø–µ—Ä–µ–¥–∞–≤ –µ–π –∫–æ–º–∞–Ω–¥—É –∏ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
5.  üöÄ **–°–æ–∑–¥–∞–Ω–∏–µ –§—É–Ω–∫—Ü–∏–∏ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (`executeCommandFunction`):**
    *   ‚è≥ **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¢—Ä–∏–≥–≥–µ—Ä:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é Inngest, —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—â—É—é –Ω–∞ —Å–æ–±—ã—Ç–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `agent/execute-command`.
    *   ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:** –í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `run_terminal_cmd` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã `open-codex`.
    *   ‚è≥ **–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—É—á–∏—Ç—å –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã.
    *   ‚è≥ **–û–±–Ω–æ–≤–∏—Ç—å –°–æ—Å—Ç–æ—è–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å `NEEDS_COMMAND_VERIFICATION`, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–≤–æ–¥ –≤ `last_command_output`.
    *   ‚è≥ **–í–µ—Ä–Ω—É—Ç—å –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `step.invoke` –¥–ª—è –≤—ã–∑–æ–≤–∞ `codingAgentHandler` (–∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –ö—Ä–∏—Ç–∏–∫–∞?) —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.
6.  üßê **–ê–¥–∞–ø—Ç–∞—Ü–∏—è `CriticAgent` (–¥–ª—è –†–µ–∑—É–ª—å—Ç–∞—Ç–∞):**
    *   ‚è≥ **–ü–æ–ª—É—á–∏—Ç—å –†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö—Ä–∏—Ç–∏–∫—É –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `last_command_output`).
    *   ‚è≥ **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –°—Ç–∞—Ç—É—Å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Ç–∞—Ç—É—Å `NEEDS_COMMAND_VERIFICATION`.
    *   ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é:** –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –ö—Ä–∏—Ç–∏–∫–∞, —á—Ç–æ–±—ã –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã `open-codex`.
    *   ‚è≥ **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –§–∏–Ω–∞–ª—å–Ω—ã–π –°—Ç–∞—Ç—É—Å:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `COMPLETED` –∏–ª–∏ `NEEDS_IMPLEMENTATION_REVISION` (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∞) / `FAILED`.
7.  üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –†–æ—É—Ç–µ—Ä–∞ –°–µ—Ç–∏:**
    *   ‚è≥ **–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –õ–æ–≥–∏–∫—É:** –û–±–Ω–æ–≤–∏—Ç—å `defaultRouter` –≤ `network.ts` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ (TeamLead -> Tester -> [Critic?] -> Handler -> Executor -> Critic -> Handler -> ...).
8.  üß™ **–ù–∞–ø–∏—Å–∞–Ω–∏–µ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –¢–µ—Å—Ç–∞ (`teamLeadWorkflow.test.ts`):**
    *   ‚è≥ **–ù–∞–ø–∏—Å–∞—Ç—å –¢–µ—Å—Ç:** –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –æ—Å–Ω–æ–≤–Ω–æ–π —É—Å–ø–µ—à–Ω—ã–π –ø—É—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ (–æ—Ç TeamLead –¥–æ –≤—ã–∑–æ–≤–∞ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –∏, –≤ –∏–¥–µ–∞–ª–µ, –¥–æ –ö—Ä–∏—Ç–∏–∫–∞ –†–µ–∑—É–ª—å—Ç–∞—Ç–∞).

**–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –≠—Ç–∞–ø—ã:**
*   **–ü–æ–ª–Ω—ã–π TDD-—Ü–∏–∫–ª —Å `open-codex`:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–≤–∏–∑–∏–π (`NEEDS_IMPLEMENTATION_REVISION`), –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∫—Ä–∏—Ç–∏–∫–∏.
*   **–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π:** –ò–∑—É—á–µ–Ω–∏–µ CodeKlee –∏ –¥—Ä—É–≥–∏—Ö.
*   **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –õ–æ–∫–∞–ª—å–Ω–æ–≥–æ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** –ü—Ä–æ—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

**–ü—Ä–µ–¥—ã–¥—É—â–∏–π –≠—Ç–∞–ø (–ó–∞–≤–µ—Ä—à–µ–Ω): –ü—Ä–æ—Ç–æ—Ç–∏–ø –ù–µ–π—Ä–æ–ö–æ–¥–µ—Ä–∞ - –£–ª—É—á—à–µ–Ω–∏–µ TDD –û—Ä–∫–µ—Å—Ç—Ä–æ–≤–∫–∏ (—Å E2B)**
*   ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (Vite/pm2 –Ω–∞ –ø–æ—Ä—Ç—É 8484).
*   ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –æ–±—â–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ (Tester -> Critic -> Coder -> Critic) –≤ Inngest + E2B.
*   ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `pm2` —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (`pm2 save`).
*   ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ `index.ts`.
*   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã `NetworkStatus` –∏ `TddNetworkState`.

**–¶–µ–ª—å –ü—Ä–∞–≤–∏–ª–∞:** –°–ª—É–∂–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º, –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–ª–∞–Ω–æ–º —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–ø–∞, **–æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å** (‚úÖ/‚ùå/‚è≥/‚ö†Ô∏è), **—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ PoC –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å `open-codex` —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫**, –Ω–∞–ø–æ–º–∏–Ω–∞—è –æ –í–µ–ª–∏–∫–æ–π –¶–µ–ª–∏.

*–û–º –®–∞–Ω—Ç–∏. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Ä–æ–∂–¥–∞–µ—Ç —è—Å–Ω–æ—Å—Ç—å.* üôè
