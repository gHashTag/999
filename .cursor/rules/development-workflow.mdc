---
description: 
globs: 
alwaysApply: true
---
# üïâÔ∏è –ü—Ä–∞–≤–∏–ª–æ: –°—Ç–∞–±–∏–ª—å–Ω—ã–π –ó–∞–ø—É—Å–∫ –°—Ä–µ–¥—ã –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Vite + PM2 –Ω–∞ –ø–æ—Ä—Ç—É 8484)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ **–≤—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É–π **Vite**, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–∞ –ø–æ—Ä—Ç—É **8484**. –ó–∞–ø—É—Å–∫–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä, Inngest, —Å–µ—Ä–≤–µ—Ä Vite) —Ä–∞–∑–¥–µ–ª—å–Ω–æ –∏ —É–ø—Ä–∞–≤–ª—è–π –∏–º–∏ —á–µ—Ä–µ–∑ `pm2` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.

**üö® CRITICAL INSTRUCTION / –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø üö®**
*   **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –°–ø–æ—Å–æ–± –ó–∞–ø—É—Å–∫–∞ –¥–ª—è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –ò—Å–ø–æ–ª—å–∑—É–π `pm2` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ `tsc --watch`, `inngest-cli dev` –∏ `pnpm run dev:start`.
*   **–ü–æ—Ä—Ç –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** –°–µ—Ä–≤–µ—Ä Vite (`dev:start`) **–î–û–õ–ñ–ï–ù** —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É **8484** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `package.json`).
*   **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Inngest:** Inngest Dev Server (`dev:serve`) **–î–û–õ–ñ–ï–ù** –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å URL `http://localhost:8484/api/inngest` (–∏—Å–ø–æ–ª—å–∑—É—è —Ñ–ª–∞–≥ `-u` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ `pm2 exec` –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏–≤ –∫–æ–º–∞–Ω–¥—É –≤ `package.json`).
*   **–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–π –ú–µ—Ç–æ–¥:** **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ô `pnpm run start`** (`node dist/index.js`). –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–µ—Å—Ç–∞–±–∏–ª–µ–Ω –∏ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏.

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ó–∞–ø—É—Å–∫—É/–ü—Ä–æ–≤–µ—Ä–∫–µ –°—Ç–∞—Ç—É—Å–∞:**

1.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ó–∞–ø—É—Å–∫ –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ (`tsc --watch`):**
    *   **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `pgrep -f "tsc --watch --preserveWatchOutput"`
    *   **–ó–∞–ø—É—Å–∫ (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω):**
        ```bash
        pm2 restart tsc-watch || pm2 start pnpm --name tsc-watch -- run build:watch
        ```
2.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ó–∞–ø—É—Å–∫ Inngest Dev Server (`dev:serve` —Å URL 8484):**
    *   **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `pm2 describe inngest-dev` (–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å 'online') –∏–ª–∏ `lsof -i :8288 | cat`
    *   **–ó–∞–ø—É—Å–∫/–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ (—Å URL 8484):**
        ```bash
        pm2 restart inngest-dev --update-env -- pnpm exec inngest-cli dev -u http://localhost:8484/api/inngest \
        || pm2 start pnpm --name inngest-dev -- run dev:serve -- -u http://localhost:8484/api/inngest
        # –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ dev:serve –≤ package.json —Ç–∞–∫–∂–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ 8484, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å pnpm exec
        ```
3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ó–∞–ø—É—Å–∫ –°–µ—Ä–≤–µ—Ä–∞ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Vite (`dev:start` - –ø–æ—Ä—Ç 8484):**
    *   **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `pm2 describe vite-app` (–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å 'online') –∏–ª–∏ `lsof -i :8484 | cat`
    *   **–ó–∞–ø—É—Å–∫/–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
        ```bash
        # –£–±–µ–¥–∏—Å—å, —á—Ç–æ dev:start –≤ package.json –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–æ—Ä—Ç 8484
        pm2 restart vite-app || pm2 start pnpm --name vite-app -- run dev:start
        ```
4.  **–û–∂–∏–¥–∞–Ω–∏–µ:** –ú–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ –¥–∞–≤–∞–π —Å–∏—Å—Ç–µ–º–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ (5-10) –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é.

**–ü–æ–ª–Ω—ã–π –°–±—Ä–æ—Å (–¢–æ–ª—å–∫–æ –ø—Ä–∏ –ü—Ä–æ–±–ª–µ–º–∞—Ö):**

*   –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ `EADDRINUSE` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
    ```bash
    pm2 delete tsc-watch || true
    pm2 delete inngest-dev || true
    pm2 delete vite-app || true
    bash scripts/kill-ports.sh # –£–±–µ–¥–∏—Å—å, —á—Ç–æ 8484 —É–±–∏–≤–∞–µ—Ç—Å—è
    # rm -rf dist # –û—á–∏—Å—Ç–∫–∞ —Å–±–æ—Ä–∫–∏ –º–æ–∂–µ—Ç –Ω–µ —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Å Vite
    # –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å–∫–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ pm2 –ø–æ —à–∞–≥–∞–º 1-3.
    ```

**üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (pm2 save):**
*   **–í–ê–ñ–ù–û:** –¢–µ–∫—É—â–∞—è —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`tsc-watch`, `inngest-dev`, `vite-app` –Ω–∞ –ø–æ—Ä—Ç—É 8484) –±—ã–ª–∞ **—É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞** 26.04.2025 —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `pm2 save`.
*   –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —ç—Ç–æ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `pm2 resurrect`.

**üö´ –ß–¢–û –ù–ï –î–ï–õ–ê–¢–¨:**

*   **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ô `pnpm run start`** (`node dist/index.js`).
*   **–ù–ï –ó–ê–ü–£–°–ö–ê–ô `pnpm run dev`** (–∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞).
*   **–ù–ï –ó–ê–ë–´–í–ê–ô –°–ò–ù–•–†–û–ù–ò–ó–ò–†–û–í–ê–¢–¨ Inngest —Å –ø–æ—Ä—Ç–æ–º 8484** (`-u` —Ñ–ª–∞–≥ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `dev:serve`).

**–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Vite/pm2 –Ω–∞ –ø–æ—Ä—Ç—É 8484**.

*–û–º –®–∞–Ω—Ç–∏. –°–ª–µ–¥—É–π –î—Ö–∞—Ä–º–µ –ó–∞–ø—É—Å–∫–∞ 8484, –∏ —Å—Ç—Ä–∞–¥–∞–Ω–∏—è –æ–±–æ–π–¥—É—Ç —Ç–µ–±—è —Å—Ç–æ—Ä–æ–Ω–æ–π.* üôè
