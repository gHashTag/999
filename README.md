# 999 - Standalone NeuroCoder Agent

# üïâÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ê–≥–µ–Ω—Ç–æ–≤ –∏ –ü—Ä–∞–≤–∏–ª–∞ –ü—Ä–æ–µ–∫—Ç–∞

**üìç –í–∞–∂–Ω–æ: –•—Ä–∞–Ω–∏–ª–∏—â–µ –ü—Ä–∞–≤–∏–ª**

> **–í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `.cursor/rules/` –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–æ–≤ `.mdc`. –≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è ‚Äì –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –î—Ö–∞—Ä–º—ã –ø—Ä–æ–µ–∫—Ç–∞. `README.mdc` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –æ–±–∑–æ—Ä –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç—Ç–∏ —Ñ–∞–π–ª—ã.**

---

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∞–≥–µ–Ω—Ç–æ–≤, –∏—Ö —Ä–æ–ª–∏, –∑–æ–Ω—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å–≤—è–∑—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ (–î—Ö–∞—Ä–º–æ–π) –ø—Ä–æ–µ–∫—Ç–∞. –°–∞–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö `AGENT_*.mdc` —Ñ–∞–π–ª–∞—Ö.

## üéØ –¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞

–î–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ü–µ–ª–∏ –∏ —ç—Ç–∞–ø–∞ —Ä–∞–±–æ—Ç —Å–º–æ—Ç—Ä–∏: [`current_task.mdc`](mdc:current_task.mdc).

## üìÇ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ [`scripts/README.md`](scripts/README.md).

## üßò‚Äç‚ôÇÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –ê–≥–µ–Ω—Ç—ã

## üìú –û–±—â–∏–µ –ü—Ä–∞–≤–∏–ª–∞ –∏ –ü—Ä–∏–Ω—Ü–∏–ø—ã

–ü–æ–º–∏–º–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –æ–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–º –¥–æ–ª–∂–Ω—ã —Å–ª–µ–¥–æ–≤–∞—Ç—å –≤—Å–µ (–≤–∫–ª—é—á–∞—è –ì—É—Ä—É –∏ –±—É–¥—É—â–∏—Ö –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π):

- **TDD:** –ù–µ—É–∫–æ—Å–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ü–∏–∫–ª—É "–ö—Ä–∞—Å–Ω—ã–π -> –ó–µ–ª–µ–Ω—ã–π -> –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥".
- **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å:** –ê–≥–µ–Ω—Ç—ã —Å—Ç—Ä–µ–º—è—Ç—Å—è —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –æ–±—Ä–∞—â–∞—è—Å—å –∫ –ì—É—Ä—É —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- **–°—Ç–∏–ª—å –∏ –ü–∞—Ç—Ç–µ—Ä–Ω—ã:** –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∏–ª—é –∫–æ–¥–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –û—Ç–ª–∞–¥–∫–∞:** –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É `bun test` –∏ —Å–ª–µ–¥—É–π —Ä–∏—Ç—É–∞–ª—É, –æ–ø–∏—Å–∞–Ω–Ω–æ–º—É –≤ @`testing-workflow.mdc`.
- **Git Workflow:** –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ feature-–≤–µ—Ç–∫–∏ –∏ Pull Request'—ã.

–≠—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –±—ã–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤.

## üïâÔ∏è –†–∏—Ç—É–∞–ª TDD —Å –ü–æ–º–æ—â–Ω–∏–∫–æ–º (`scripts/tdd-cycle.sh`)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ä—É—á–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ TDD-—Ü–∏–∫–ª–∞ –ª–µ–≥–∫–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–∞–∂–Ω—ã–µ —à–∞–≥–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (`tsc`) –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∞–º–∏ –∏–ª–∏ –∑–∞–±—ã—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—é –æ—à–∏–±–æ–∫, "—Å–ª–æ–º–∞–Ω–Ω—ã–º" –∫–æ–º–º–∏—Ç–∞–º –∏ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω—ã–º —Ä–µ–≥—Ä–µ—Å—Å–∏—è–º, –∫–æ–≥–¥–∞ –Ω–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–º–∞–µ—Ç —Å—Ç–∞—Ä—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –í—Ä–µ–º—è —Ç—Ä–∞—Ç–∏—Ç—Å—è –Ω–∞ –æ—Ç–ª–∞–¥–∫—É –ø—Ä–æ–±–ª–µ–º, –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –∏–∑–±–µ–∂–∞—Ç—å.

**–†–µ—à–µ–Ω–∏–µ (–î—Ö–∞—Ä–º–∞):** –ß—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —á–∏—Å—Ç–æ—Ç—É –∫–æ–¥–∞, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤ TDD, **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç-–ø–æ–º–æ—â–Ω–∏–∫ `scripts/tdd-cycle.sh` –¥–ª—è **–ö–ê–ñ–î–û–ì–û** —Ü–∏–∫–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≤–∫–ª—é—á–∞—é—â–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞.

**–ö–∞–∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

1.  –ù–∞–ø–∏—à–∏—Ç–µ –ø–∞–¥–∞—é—â–∏–π —Ç–µ—Å—Ç (üî¥) –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —Ñ–∞–π–ª–µ (`src/__tests__/...`).
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
    ```bash
    bash scripts/tdd-cycle.sh <–ø—É—Ç—å_–∫_–≤–∞—à–µ–º—É_—Ç–µ—Å—Ç–æ–≤–æ–º—É_—Ñ–∞–π–ª—É>
    ```
3.  –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —Å–∫—Ä–∏–ø—Ç–∞:
    *   –û–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç —Ç–∏–ø—ã –∏ —É–±–µ–¥–∏—Ç—Å—è, —á—Ç–æ —Ç–µ—Å—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–∞–¥–∞–µ—Ç (üî¥).
    *   –ü–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–Ω –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∏–ø—ã –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–Ω –Ω–µ –ø—Ä–æ–π–¥–µ—Ç (üü¢).
    *   –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –æ–Ω —Å–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Ç–∏–ø—ã –∏ —É–±–µ–¥–∏—Ç—Å—è, —á—Ç–æ —Ç–µ—Å—Ç –≤—Å–µ –µ—â–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç (‚ôªÔ∏è).
4.  **–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ** —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –∫–æ–º–º–∏—Ç—É –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (`current_task.mdc`, `SUCCESS_HISTORY.md`, `REGRESSION_PATTERNS.md`).

**–£–ª—É—á—à–µ–Ω–∏–µ –°–∫—Ä–∏–ø—Ç–∞:** –°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –∏ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∞—Ç—å –ø–æ –º–µ—Ä–µ –≤—ã—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫—Ä–∞–µ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏–ª–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

*–û–º –®–∞–Ω—Ç–∏. –°–ª–µ–¥—É–π —Ä–∏—Ç—É–∞–ª—É, –∏ –∫–æ–¥ —Ç–≤–æ–π –±—É–¥–µ—Ç —á–∏—Å—Ç –∏ —Å—Ç–∞–±–∏–ª–µ–Ω.* üôè

## üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ–º (State Management)

## üìú –û–±—â–∏–µ –ü—Ä–∞–≤–∏–ª–∞ –∏ –ü—Ä–∏–Ω—Ü–∏–ø—ã

## ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –û–∫—Ä—É–∂–µ–Ω–∏–µ–º –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ–Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤

–í—Å–µ —Ñ–∞–π–ª—ã —Å —Ç–∏–ø–∞–º–∏ (*.d.ts, *type\*.ts) –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö `src/types` –∏–ª–∏ `vendor-types`. –≠—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç:

- –†–∞–∑–¥–µ–ª–µ–Ω–∏—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏ –≤–µ–Ω–¥–æ—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤
- –ï–¥–∏–Ω–æ–π —Ç–æ—á–∫–µ –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Ç–∏–ø–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–∏—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—é —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: `./scripts/type-location-checker.sh`

### –ó–∞–ø—É—Å–∫ –û–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ê–≥–µ–Ω—Ç–æ–≤ (–†—É—á–Ω–æ–π —Ä–µ–∂–∏–º)

–í–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PM2 –∏–ª–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤–æ –≤—Ä–µ–º—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤—Ä—É—á–Ω—É—é –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–∫–Ω–∞—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ **—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `bun`**:

1.  **–û–∫–Ω–æ 1: –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript (Watch Mode)**

    ```bash
    bun run build:watch
    ```

    - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç `tsc --watch --preserveWatchOutput`. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç `.ts` —Ñ–∞–π–ª—ã –≤ `dist/` –ø—Ä–∏ –∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–∏.

2.  **–û–∫–Ω–æ 2: Inngest Dev Server**

    ```bash
    bun run dev:serve
    ```

    - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç `inngest-cli dev`. –°–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –Ω–∞ `http://localhost:8288`, –Ω–∞—Ö–æ–¥–∏—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ Inngest –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ–¥–∫–ª—é—á–∞—è—Å—å –∫ –Ω–µ–º—É –ø–æ URL, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –∫–æ–º–∞–Ω–¥–µ, –æ–±—ã—á–Ω–æ `http://localhost:8484/api/inngest`).

3.  **–û–∫–Ω–æ 3: –°–µ—Ä–≤–µ—Ä –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
    ```bash
    bun run dev:start
    ```
    - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç API –¥–ª—è Inngest (`/api/inngest`) –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–π/–∞–≥–µ–Ω—Ç–æ–≤. –ü—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç 8484.

**–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —Å AI:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–∫–Ω–∞—Ö –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PM2 (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pm2`.

1.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):**
    ```bash
    npm install -g pm2
    ```
2.  **–ü–µ—Ä–≤—ã–π –ó–∞–ø—É—Å–∫ / –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
    –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (`pm2 delete all`) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ **—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `bun`**:

    ```bash
    # –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä TypeScript –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
    pm2 start bun --name tsc-watch -- run build:watch

    # Inngest Dev Server (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Inngest)
    pm2 start bun --name inngest-dev -- run dev:serve

    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–°–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
    pm2 start bun --name app-server -- run dev:start
    ```

3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç–∞—Ç—É—Å–∞:**
    ```bash
    pm2 list
    ```
4.  **–ü—Ä–æ—Å–º–æ—Ç—Ä –õ–æ–≥–æ–≤:**
    ```bash
    pm2 logs <–∏–º—è_–ø—Ä–æ—Ü–µ—Å—Å–∞>
    pm2 logs # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    ```
5.  **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
    ```bash
    pm2 save
    pm2 resurrect
    ```
6.  **–ü–æ–ª–Ω–∞—è –û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
    ```bash
    pm2 delete all
    ```

---

## üè∫ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ("–ò–≥–ª–∞ –ö–æ—â–µ—è")

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –¥–æ–ª–≥–∏—Ö –æ—Ç–ª–∞–¥–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Å—Ä–µ–¥—ã, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º—É —Å–Ω–∏–º–∫–æ–≤ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤.

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –í–∞–∂–Ω—ã–µ –§–∞–π–ª—ã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–º–∏ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å–Ω–∏–º–∫–∏:

- `package.json`: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–∫—Ä–∏–ø—Ç—ã.
- `bun.lockb`: –§–∏–∫—Å–∏—Ä—É–µ—Ç —Ç–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–∞–Ω–∞–ª–æ–≥ `pnpm-lock.yaml`).
- `tsconfig.json`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ TypeScript.
- `(vite.config.ts —É–¥–∞–ª–µ–Ω)`: –†–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è Vite/Vitest, —Ç–µ–ø–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Bun.
- `.npmrc`: –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è `bun`, —Ö–æ—Ç—è —á–∞—Å—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –†–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è `pnpm` —Å `node-linker=hoisted`.

### –°–æ–∑–¥–∞–Ω–∏–µ –°–Ω–∏–º–∫–∞

–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
bash scripts/config/save-snapshot.sh
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `snapshots/snapshot-YYYY-MM-DD_HH-MM-SS`, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∫–æ–ø–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –°–Ω–∏–º–∫–∞

–ï—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—ã–ª–∞ –Ω–∞—Ä—É—à–µ–Ω–∞ –∏–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ –ø—Ä–æ–µ–∫—Ç –∑–∞–Ω–æ–≤–æ, –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –∏–∑–≤–µ—Å—Ç–Ω—É—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

1.  **–ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Å–Ω–∏–º–æ–∫:** –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ `snapshots/`.
2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**, —É–∫–∞–∑–∞–≤ –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–Ω–∏–º–∫–∞:

    ```bash
    # –ó–∞–º–µ–Ω–∏—Ç–µ <–∏–º—è_–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏_—Å–Ω–∏–º–∫–∞> –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ
    bash scripts/config/restore-snapshot.sh snapshots/<–∏–º—è_–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏_—Å–Ω–∏–º–∫–∞>
    ```

3.  **–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
    ```bash
    bun install
    ```

---

## üõ†Ô∏è –ù–µ–¥–∞–≤–Ω–∏–µ –í–∞–∂–Ω—ã–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ú–∞–π 2024)

–î–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –æ—à–∏–±–æ–∫:

- **–ü—Ä–æ–±–ª–µ–º–∞ —Å `zod`:** –û—à–∏–±–∫–∏ TypeScript "Cannot find module 'zod'" –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã –ø—É—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ `bun`. –ú–µ—Ö–∞–Ω–∏–∑–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `bun` —É—Å—Ç—Ä–∞–Ω–∏–ª —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É.
- **–û—à–∏–±–∫–∞ –¢–∏–ø–æ–≤ –ê–≥–µ–Ω—Ç–æ–≤:** –û—à–∏–±–∫–∞ `TS2352` –≤ `src/inngest/logic/dependencyUtils.ts` –±—ã–ª–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ —è–≤–Ω—ã–º –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ–º —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ `as unknown as Agent<TddNetworkState>`. **–¢—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** —Ñ—É–Ω–∫—Ü–∏–∏ `create*Agent` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ã —Ç–∏–ø–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è (`TddNetworkState`) –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏.
- **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `bun`:** –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å `pnpm` –∏ `Vitest` –Ω–∞ `bun` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ (`bun test`). –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `vite.config.ts`, `vitest.config.ts`, `vitest.config.e2e.ts` –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.

---

## üöÄ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –û–∫—Ä—É–∂–µ–Ω–∏—è —Å –ù—É–ª—è

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone <repository_url>
    cd <repository_directory>
    ```
2.  **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
    - –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–Ω–∏–º–æ–∫ –≤ `snapshots/`.
    - –í—ã–ø–æ–ª–Ω–∏—Ç–µ `bash scripts/config/restore-snapshot.sh snapshots/<–∏–º—è_–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ_—Å–Ω–∏–º–∫–∞>`.
3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    bun install
    ```
4.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, API –∫–ª—é—á–∏).
5.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å AI) –∏–ª–∏ PM2, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –û–∫—Ä—É–∂–µ–Ω–∏–µ–º –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏".
6.  **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:**
    ```bash
    bun run lint
    bun test
    # –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
    ```

---

# 999

# NeuroCoder TDD Orchestration Example

This project demonstrates a standalone NeuroCoder agent using the Inngest Agent Kit, focusing on a Test-Driven Development (TDD) orchestration pattern with multiple agents (Tester, Coder, Critic).

## Overview

The goal is to create a system where a task is passed through a network of agents:

1.  **Tester:** Writes tests for the task.
2.  **Coder:** Writes implementation code based on the tests.
3.  **Critic:** Reviews both tests and code, providing feedback or approving the result.

This cycle utilizes E2B sandboxes for code execution and Inngest for managing the agent workflows and state.

## Project Structure

```
.
‚îú‚îÄ‚îÄ src/                # Source code
‚îÇ   ‚îú‚îÄ‚îÄ agents/         # Agent definitions (prompts, tools, logic) (placeholder)
‚îÇ   ‚îú‚îÄ‚îÄ tools/          # Tool definitions for agents (placeholder)
‚îÇ   ‚îú‚îÄ‚îÄ index.ts        # Main Inngest function definition and Express server setup
‚îÇ   ‚îú‚îÄ‚îÄ network.ts      # Definition of the TDD agent network and router
‚îÇ   ‚îú‚îÄ‚îÄ agentDefinitions.ts # Functions to create agent instances
‚îÇ   ‚îú‚îÄ‚îÄ toolDefinitions.ts  # Functions to create tool instances
‚îÇ   ‚îú‚îÄ‚îÄ types.ts        # TypeScript types and interfaces
‚îÇ   ‚îî‚îÄ‚îÄ inngest/        # Inngest specific utilities (e.g., sandbox management)
‚îú‚îÄ‚îÄ scripts/            # Utility shell scripts
‚îú‚îÄ‚îÄ dist/               # Compiled JavaScript output (from TypeScript)
‚îú‚îÄ‚îÄ artifacts/          # Directory for downloaded E2B artifacts (.gitignore-d)
‚îú‚îÄ‚îÄ html/               # Directory for Vitest HTML report output (.gitignore-d)
‚îú‚îÄ‚îÄ .env.example        # Example environment variables
‚îú‚îÄ‚îÄ package.json        # Project dependencies and scripts
‚îú‚îÄ‚îÄ tsconfig.json       # TypeScript configuration
‚îú‚îÄ‚îÄ vitest.config.ts    # Vitest configuration
‚îú‚îÄ‚îÄ README.md           # This file
‚îî‚îÄ‚îÄ ROADMAP.md          # Detailed plan and progress tracking
```

## –ü—Ä–∞–≤–∏–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ú–µ—Ö–∞–Ω–∏–∑–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

- **launchd**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- **rsync**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

- `/Users/playra/999/.cursor/rules` - –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `/Users/playra/999/scripts` - –°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:

```bash
launchctl list | grep 999
rsync --dry-run -avn /Users/playra/999/.cursor/rules/ destination:/path/
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
bash /Users/playra/999/scripts/update-config.sh
```

## Setup

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd <repository-directory>
    ```
2.  **Install dependencies:** Requires Node.js and pnpm.
    ```bash
    pnpm install
    ```
3.  **Configure Environment Variables:**
    - Copy `.env.example` to `.env`.
    - Fill in your `E2B_API_KEY` and `DEEPSEEK_API_KEY`. You might need to adjust `DEEPSEEK_MODEL` if you prefer a different DeepSeek model.
    ```bash
    cp .env.example .env
    # Edit .env with your keys
    ```
4.  **Setup Git Hooks (Optional but Recommended):**
    ```bash
    pnpm prepare
    # or directly: npx husky install
    ```

## Development Environment

The primary command for local development is:

```bash
pnpm run dev
```

This command performs several actions using `concurrently`:

1.  **Cleans Ports:** Runs `scripts/kill-ports.sh` to free up potentially conflicting ports (8288, 8289, 4173, 3000, 5000, 8484).
2.  **Build Watch:** Runs `tsc --watch` to continuously compile TypeScript files into the `dist/` directory.
3.  **Inngest Dev Server:** Runs `npx inngest-cli dev -u http://localhost:8484/api/inngest`. This is the core Inngest development server that listens for events and triggers function runs. It connects to the application server running on port 8484.
4.  **Test Report Server:** Runs `npx vite preview --outDir html` to serve the Vitest HTML coverage report (usually accessible at `http://localhost:4173`).

**Important Notes:**

- The `dev` script **does not** run `node dist/index.js` directly anymore. The `inngest-cli dev` server handles the execution of Inngest functions defined in `dist/index.js`.
- The `--raw` flag is passed to `concurrently` to preserve color output from the individual processes.

**Troubleshooting:**

- **Port Conflicts (`EADDRINUSE`):** If `pnpm run dev` fails due to port conflicts even after the `kill-ports.sh` script, some processes might not have terminated correctly. You can manually kill them using `pkill`. Open a separate terminal and run:
  ```bash
  # Stop all related dev processes forcefully
  pkill -f 'pnpm run dev' && pkill -f 'inngest-cli dev' && pkill -f 'vite preview' && pkill -f 'tsc --watch' && pkill -f 'nodemon'
  # Run this command a couple of times if needed, then try 'pnpm run dev' again.
  ```
- **Stale Commands/Behavior:** If `pnpm run dev` seems to be running an old version of the script (e.g., still trying to launch `nodemon`), try cleaning the pnpm cache:
  ```bash
  pnpm store prune
  ```
  If that doesn't work, try a full reinstall:
  ```bash
  rm -rf node_modules
  pnpm install
  ```
  Then, use the `pkill` command above before running `pnpm run dev` again.

## Sending Test Events

To trigger the `coding-agent/run` function during development, use the provided script:

```bash
# Ensure 'pnpm run dev' is running in another terminal

# Send event with default task
node scripts/send-test-event.mjs

# Send event with a custom task string
node scripts/send-test-event.mjs "Implement a function that calculates Fibonacci sequence"

# Send event with custom JSON data (pass as a single string argument)
node scripts/send-test-event.mjs '{"input": "Refactor this code to use async/await", "context": "some existing code..."}'
```

## Running Tests

- **Run all tests once:** `pnpm test`
- **Run tests in watch mode with UI and coverage:** `pnpm run test:watch` (Access UI typically at `http://localhost:51204/__vitest__/`)
- **Generate coverage report:** `pnpm run coverage` (HTML report available in `html/` directory, view with `pnpm run dev:test-report`)

## Linting and Formatting

- **Check formatting:** `pnpm run format:check`
- **Apply formatting:** `pnpm run format`
- **Check linting:** `pnpm run lint`
- **Apply linting fixes:** `pnpm run lint:fix`

These checks are also run automatically on staged files before committing if you've set up Husky hooks (`pnpm prepare`).

## Building for Production

```bash
pnpm run build
```

This compiles TypeScript code to the `dist/` directory.

## Starting in Production Mode

```bash
node dist/index.js
```

This starts the Express server which serves the Inngest functions. Ensure necessary environment variables are set.

## Development Notes

### Node.js ES Modules and File Extensions

This project uses native ES Modules (ESM) configured via `"type": "module"` in `package.json` and compiled with TypeScript (`tsc`).

**Problem:** Node.js, when running ESM code, requires **explicit file extensions** for relative imports (e.g., `.js`). It does not automatically resolve extensions like `.ts` or look for `index.js` within directories as CommonJS did.

**Symptom:** Running the compiled code (e.g., `node dist/index.js`) results in `ERR_MODULE_NOT_FOUND` or `ERR_UNSUPPORTED_DIR_IMPORT` errors for relative paths.

**Solution:** You **MUST** include the `.js` extension in all relative import/export paths within the TypeScript source code (`.ts` files).

```typescript
// Incorrect (causes runtime error in Node.js ESM)
import { something } from "./my-module"
import { helper } from "../utils/helpers"
export * from "./logic/service"

// Correct (works after tsc compilation)
import { something } from "./my-module.js"
import { helper } from "../utils/helpers.js"
export * from "./logic/service.js"
```

**Why?**

- `tsc` (with current settings like `moduleResolution: "bundler"` or even `"NodeNext"`) does not automatically append `.js` extensions to relative paths in the compiled JavaScript output.
- Node.js strictly follows the ESM specification, which mandates explicit extensions for relative paths to avoid ambiguity and align with browser behavior.

**Alternatives (Not Recommended):**

- Using `--experimental-specifier-resolution=node`: Relies on an experimental Node.js flag.
- Using Bundlers (Vite, esbuild): Adds complexity but can handle resolution automatically (potential future improvement).

**Current Practice:** Manually add `.js` to all relative imports/exports in `.ts` files.

### Common Testing Issues & Solutions

## –ó–∞–ø—É—Å–∫ –û–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ê–≥–µ–Ω—Ç–æ–≤ (–†—É—á–Ω–æ–π —Ä–µ–∂–∏–º)

–í–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PM2 –∏–ª–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤–æ –≤—Ä–µ–º—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤—Ä—É—á–Ω—É—é –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–∫–Ω–∞—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:

1.  **–û–∫–Ω–æ 1: –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript (Watch Mode)**

    ```bash
    pnpm run build:watch
    ```

    - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç `tsc --watch --preserveWatchOutput`. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç `.ts` —Ñ–∞–π–ª—ã –≤ `dist/` –ø—Ä–∏ –∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–∏.

2.  **–û–∫–Ω–æ 2: Inngest Dev Server**

    ```bash
    pnpm run dev:serve
    ```

    - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç `inngest-cli dev`. –°–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –Ω–∞ `http://localhost:8288`, –Ω–∞—Ö–æ–¥–∏—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ Inngest –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ–¥–∫–ª—é—á–∞—è—Å—å –∫ –Ω–µ–º—É –ø–æ URL, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –∫–æ–º–∞–Ω–¥–µ, –æ–±—ã—á–Ω–æ `http://localhost:8484/api/inngest`).

3.  **–û–∫–Ω–æ 3: –°–µ—Ä–≤–µ—Ä –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Vite)**
    ```bash
    pnpm run dev:start
    ```
    - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç `vite --port 8484`. –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç API –¥–ª—è Inngest (`/api/inngest`) –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–π/–∞–≥–µ–Ω—Ç–æ–≤. –ü—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç 8484.

**–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —Å AI:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–∫–Ω–∞—Ö –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫.

## ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –û–∫—Ä—É–∂–µ–Ω–∏–µ–º –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (PM2)

–î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ–Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pm2` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–º–∏.

1.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):**
    ```bash
    npm install -g pm2
    ```
2.  **–ü–µ—Ä–≤—ã–π –ó–∞–ø—É—Å–∫ / –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
    –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (`pm2 delete all`) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ:

    ```bash
    # –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä TypeScript –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
    pm2 start pnpm --name tsc-watch -- run dev:watch

    # Inngest Dev Server (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Inngest)
    pm2 start pnpm --name inngest-dev -- run dev:inngest

    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Vite —Å–µ—Ä–≤–µ—Ä)
    pm2 start pnpm --name vite-app -- run dev:start
    ```

3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç–∞—Ç—É—Å–∞:**
    ```bash
    pm2 list
    ```
    –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ (`tsc-watch`, `inngest-dev`, `vite-app`) –∏–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å `online`.
4.  **–ü—Ä–æ—Å–º–æ—Ç—Ä –õ–æ–≥–æ–≤:**
    ```bash
    pm2 logs <–∏–º—è_–ø—Ä–æ—Ü–µ—Å—Å–∞> # –Ω–∞–ø—Ä–∏–º–µ—Ä, pm2 logs tsc-watch
    pm2 logs # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    ```
5.  **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
    –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö —Å–ø–∏—Å–æ–∫:
    ```bash
    pm2 save
    ```
    –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö –ø–æ–∑–∂–µ.
6.  **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
    –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—à–∏–Ω—ã –∏–ª–∏ –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –±—ã–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
    ```bash
    pm2 resurrect
    ```
7.  **–ü–æ–ª–Ω–∞—è –û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
    ```bash
    pm2 delete all
    ```

**–í–∞–∂–Ω–æ:** –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–∏ `pm2 start` –∫–æ–º–∞–Ω–¥—ã –≤ **–æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**, –∞ –Ω–µ —á–µ—Ä–µ–∑ AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, —Ç–∞–∫ –∫–∞–∫ —Å–µ—Å—Å–∏—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –º–æ–∂–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å—Å—è.

---
