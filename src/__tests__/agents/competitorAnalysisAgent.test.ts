describe("CompetitorAnalysisAgent", () => {
  beforeEach(() => {
    // setupTestEnvironment()
  })

  it("creates KPI table with required columns", async () => {
    // Arrange: подготовить моки и входные данные
    // Act: вызвать метод создания таблицы
    // Assert: проверить наличие всех колонок
  })

  it("calculates engagement metrics correctly", async () => {
    // Arrange: подготовить тестовые данные
    // Act: вызвать расчет метрик
    // Assert: проверить корректность расчетов
  })

  it("normalizes data to common scale", async () => {
    // Arrange: подготовить разнородные данные
    // Act: вызвать нормализацию
    // Assert: проверить приведение к единой шкале
  })

  it("calculates post score based on metrics", async () => {
    // Arrange: подготовить метрики
    // Act: рассчитать общий балл
    // Assert: проверить правильность расчета
  })

  it("generates viral video script based on top posts", async () => {
    // Arrange: подготовить топовые посты
    // Act: вызвать генерацию скрипта
    // Assert: проверить структуру и содержание скрипта
  })

  // ... другие тесты по этапам логики
})
